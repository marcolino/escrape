TODO 1.0:
 - google search:
    - separate tabs for photos slideshow and google search...
    - duplicate photo table in photo + photo_detail tables, to save thruthful/un-thruthful flag per person... (A LOT OF WORK... :-()
    - in search results page, add a "white list" handling (list/add(?), remove, ...)
    - add a 'x' small button to secondary uniq persons, to cut their secondary uniqueness...
    - before google search, check image has already thruthful flag...
    - test un-thruthful images rendering in views...
    - handle thruthful/un-thruthful flag storing
 - handle all exceptions at least with notify.error() ...
 - move style="..." from all views to style.css...
 - if a user changes the phone number of a person, person uniqueness should be re-asserted (assertPersonsUniqueness())...
 - how to force reload of single row in persons view after person modification?
 - think again to css for opened-uniq_chain identification (now it's a black bottom border...)
 - revise sieves.options handling...
 - rethink about countries/cities/category
 - rethink about authentication / sieves / persons view/controllers relationships...
 - page comments to 100 max?
 - add thread level to person comments view
 - when changing address in person view, street view and street indications SOMETIMES show error: Waiting for address geo-codification...
 - when updating a person's phone, if new phone is unavailable, verify we keep old number, and set active to false...
 - when syncing persons, and two photos are equal, update photo path... (DONE, TO BE TESTED @HOME)

 - remove "page_cleaned" column from "person_detail" (@HOME)

 - solve all these TODO's

TODO 1.1:
 - a synopsys for all methods in api and app
 - a perfect 'resize' directive strategy to calculate it's height based on previous and following elements heights
 - options: country / city / category should be considered when sync'ing persons
 - resolve conflicting cases in SQL and Angular (underscore_case / camelCase), and reset camelcase to true in .jshintrc...
 - when clicking log-in / sign-up, remember referral url, to redirect user there, after login / sign-up ...
 - if sieves filter out a 'primary' person and not a secondary (, ...) person, then should show secondary (, ...) person (currently all the group is hidden) ...
 - use the same capitalizing convention for all exceptions (all lowercase? / First uppercase?)
 - use $userId in *all* methods in Db class
 - disable html stack trace for Slim errors (?)
 - assertPersonsUniqueness() is quite slow? Can we fasten it? Use XDEBUG @HOME...
 - why SGI source sometimes answers with mobile version page?
 - nationality combo: accept input keys to scroll items (ASKED ON S.O., ON HOLD...)
 - think about a way to allow users to add/remove uniquenesses...
 - add more fields (ex.: milf OR (/(matur.)|(milf)/)) in person's table, and the handle them in sync() and person view...
 - when cookie expires, we lost all user info...
 - solve all TODO's in source...

TODO 2.0:
 - I18n (?) (see:
     - <https://docs.angularjs.org/guide/i18n>
     - <https://angular-gettext.rocketeer.be>
     - <https://github.com/angular/bower-angular-i18n>
     - <https://github.com/lgalfaso/angular-dynamic-i18n>
     - <http://stackoverflow.com/questions/13007430/angularjs-and-locale>:
   You can load the locale you want into localStorage, then refresh the page. Have the script below load the i18n file you need. Changing the locale on the fly isn't supported yet.
   <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.0.3/angular.min.js"></script>
   <script>
     var locale = JSON.parse(localStorage.getItem('locale'));
     if (locale) {
       document.write('<script src="scripts/i18n/angular-locale_'+locale+'.js"><\/script>');
     }
   </script>
 - move to https (see: <https://www.digitalocean.com/community/tutorials/how-to-set-up-apache-with-a-free-signed-ssl-certificate-on-a-vps>)
 - in list view show only one page of results (20?, 30?); then, when user is close to scroll to the end of page, load next page
 - enable "Google Analytics" in index.html

DONE:
 - search() should issue a persons reload...
 - data -> search/filters (find a good term ["sieve"] )
 - SQL: uppercase reserved words
 - jpeg -> jpg
 - console.error()s, exceptions -> notify.error() ...
 - post-commit hook to sync latestTag javascript variable with latest tag from git
 - $sitesDefinitions from PersonsControllers.php to a config file in a .gitignore folder
 - auto set input focus in login and register forms
 - nationality.countryCode/countryName => nationality + function countryName(countryCode)...
 - table person: timestamp => timestamp_creation, timestamp_lst_synced
 - in goolge search results page, shorten long urls text...
 - see if angular.rangeslider can be modified to handle inline sliders...
 - in goolge search results page, on empty results, do not show buttons ...
 - @office, clean setup/*.php contents...
 - why DB errors are shown so badly in notify?
 - why DB errors are shown twice in notify?
 - angular.rangeSlider.js:
    154   '<div class="ngrs-handle ngrs-handle-min"><i class="ngrs-value-inline">{{filteredModelMin}}</i></div>',
    155   '<div class="ngrs-handle ngrs-handle-max"><i class="ngrs-value-inline">{{filteredModelMax}}</i></div>',
   now we changed source... If author does not answer, we shell fork and write a custom template, or something...
 - key_site => site_key
 - data => sieves
 - store(...)Data => store(...)Sieves
 - handle css for fake photos 
 - test new "CREATE TABLE IF NOT EXISTS user"
 - notify.js: truncate (hellip) too long messages...
 - update DB class to work with new person+detail schema...
 - register: do no accept reserved username '*'... (error: "username not allowed", not "already registered"...)
 - prepend today date to slim log
 - after login() and logout(), issue a persons-reload()...
 - DB::getAllSieved(): select SYSTEM and USER fields...???!!!
 - throw new Exception("error getting persons with filters", 0, $e): PDO.$e not reported...
 - handle css fake on persons view (at least one fake photo ? fake : thruthful)
 - when saving photo url, normalize it (strip "../../"...) - DONE - TO BE TESTED @home
 - analize 2015-22-03.log ...
 - $this->sitesDefinitions = [ "..." => [ ... "charset" => "utf-8", "accepts-tor" => <boolean>,
 - pass user id from authentication to service.js, and to API (BUT, WHAT WAS THE REASON?? ... however, no, we could use username ('*' ...))
 - thruthfulness => thrutful /g
 - handle flag to close 'options', more than 'filters'...
 - add 'api/setup' to .gitignore @HOME (.gitignore is not committed...)
 - profile @HOME (enabling apd_set_pprof_trace() at the bottom of index.php) @HOME (can't run Pecl/apd with PHP 5.6 (from Remi) on Centos 6.6 @OFFICE... :-() (No, using xdebug @HOME)
 - $timestampLastSyncPerson (in assertPersonsActivity()) seems MD5 (hex), not TIMESTAMP... ???
 - handle 'timestamp_last_sync' (and 'active'...) flag when syncing
 - the field "active" is INTEGER in DB, boolean in php/JS code, and combered with text values ("any" / yes" / "no") in filter
 - [sS]ite => [sS]ource
 - options: contry / city / category
 - $this->sitesDefinitions = [ ... "access-denied-pattern" (CAPTCHA / banned your access)
 - $scope.person.timestamp_creation = 0; $scope.person.timestamp_last_sync = 0; => CAMELCASE? (NO)
 - design a nicer layout for persons view... :-()
 - PHP Fatal error:  Call to undefined function mb_detect_encoding() @OFFICE (sudo yum --enablerepo=remi install php-mbstring)
 - thruthful "unknown" => undefined, thruthful in persons and person views => "yes", "no", undefined... (set 'thruthful' field to person_detail table...)
 - save Sublime Text 3 (3080) license key (saved to Dropbox/Privata/Sublime-Text/)
 - remove "person-img-url" from setup/persons.php @HOME
 - sgi/esc.../annuncio/adv2945: check phone pattern... @HOME (on 2015-03-29 it is fine...)
 - design a "unification()" method to "unify" different persons to a single one (be simple, be hungry...)
 - debug "unification()" method (sort uniq persons to be close each other...)
 - in PersonsController: $idPerson =?=> $personId ???
 - in PersonsController: get logged user id ...
 - var_export($VAR, true) => any2string($VAR)
 - persons view - person.timestamp_last_sync: set up a date format variable (i.e.: dateFormat = 'EEEE d MMM y h:mm') in controller
 - save scroll height on persons view when opening details view, and restore it when back to persons view
 - in "simulation", use public url photos, do not download locally...
 - do not call getSourcesCities(undefined) (see slim logs...)
 - handle empty/vacation phones while sync'ing
 - handle sorting by some fields in list view
 - in google search results page, make buttons (Fake, Thrutful, Don't know) always visible... (results in  a scroller)
 - put more info (more than the name) in "ng-attr-title" for person's photo (in persons view) (nooo)
 - in google search results page, handle error "Google thinks we're bot and won't process our requests"...
 - sync: skip person page if page sum matches with last synced... (do we save anything worth?) NO
 - options: country / city / category are to be handled server side...
 - remove all "is_array_multi()" checks (after db fechtall's...) (are we sure it's unuseful?) TO BE TESTED (@HOME...)
 - try to unify getLastModificationTimestampFromUrl($url), getMimeFromUrl($url) to getUrlContents(...) ...
 - remove camel_case comments (set in .jshintrc)
 - PersonsController - line 128: sleep a random number of seconds to avoid being banned...
 - use integerNumber.js directive
 - do not search for address if address is empty
 - "Median rating of comments..." should not be shown if # of comments is 0
 - in persons view, put a blank image in person's header to avoid header left collapse with some screen sizes... (NO)
 - title of nationality in persons view: countryName, not countryCode...
 - globally rename streetAddressModalPopup to streetAddressMapModalPopup
 - globally rename streetAddressIndicationsModalPopup to streetAddressViewModalPopup
 - person detail view: replace static google street + google street indications with dynamic google street view:+indications (see: <http://www.honobono-life.info/wpeng/google-maps-for-angularjs-directly-accessing-street-view-datav2-0-7>)
 - filter all sites defined and all esc* sites from photos 'occurrences' (and add also "http://esc...profil.com/", ...)
 - in google search results page, add small button "add to white list" after url...
 - review user writes...
 - handle guest tentative write warning
 - check if timestamps on DB are * 1000 or not (should be not: correct comment_table...)
 - person detail view: add active/inactive flag visualization
 - we don't use photosCardDeckMerge() anymore, backup this code (in "old/api/cards.php")
 - add total # of persons in footer
 - add a "back to list view" button in person view
 - since we removed resize directive from person view, we should left-right re-align header with rows...
 - set css cursor as pointer in maps buttons in person view
 - remove resize directive from persons view
 - for total # of persons in footer, don't use bare count, but ignore from the sum the secondary persons
 - PDO::bind_param(... $data_type) we currently don't set type (it defaults to PARAM_STR): check if all-string values in DB can be someway harmful... (No, auto-conversion is done, see http://stackoverflow.com/questions/833510/php-pdobindparam-data-types-how-does-it-work)
 - show the name of person in persons view on extra-small screens in it's own row (no-wrap text...)
 - add an empty element to person view nationality dropdown elements
 - going from person view to persons view, sort ordering is lost
 - id_user_max: do we need it? (No)
 - going from person view to persons view, try to avoid reloading persons...
 - check why active field in person table is 0 for alla persons if sync breaks... and clearify both active / active_label fields necessity (rename one with a leading '_' ?)
 - does "active_from_source" field should live on DB? No! Split normalizePhone() to normalizePhone() + isPhoneValid() and call it in assertPersonsActivity() ...
 - sieves apply does not force a person reload anymore... (see if persons optimization is the cause... YES)
 - check DB::get(), DB::set(): really use 'id' field? not id_person / id_comment / id_photo ??? (YES; NOW THEY SHOULD)
 - remove "$userId" from PersonsController.php and CommentsController.php classes (NO, CHANGED DEFAULTS HANDLING IN DB CLASS)
 - going from person view (after a person change) to persons view, try to avoid reloading persons... (it's not the slowlines main cause...)
 - add photos if md5 sum of details page changes... (DONE, TO BE TESTED @HOME...) CAN'T WORK, REMOVED
 - revise check for activity... (DONE, TO BE TESTED...)
 - does nationalityDetect reads the name? (DONE, TO BE CHECKED)
 - does nationalityDetect sets the right countryCode ? (DONE, TO BE CHECKED)
 - does nationalityDetect excludes "ALLA FRA....."? (DONE, TO BE CHECKED)
 - normalizeName: \n+ => \n (DONE, TO BE CHECKED)
 - check assertUniqueness loop... (DONE, TO BE CHECKED)
 - db: remove active_label field (and test activeFromSource implementation) (@HOME)
 - add a "loading" image while loadPersons()... (DONE, TO BE TESTED @HOME...)
 - when forcing reload of person view, no persons number in footer is shown...
 - "watermarks/unknown-label.png" ??? (chmod 644 ?) (TO BE TESTED...)
 - if an active flag is 0, it's not set to 1 even if person is back... (DONE, TO BE TESTED @HOME...)
 - remove empty items in sieves nationality dropdown... (DONE, TO BE TESTED @HOME...)
 - test personsCheckUniquenessByPhotos() (DONE (?), TO BE TESTED @HOME)
 - avoid name normalization for sgi ("IN.... RU...") (DONE, TO BE TESTED @HOME...)
 - avoid scrolling to saved person position when changing sort order... (OPENING DETAILS IN NEW PAGE, PROBLEM VANISHED)
 - does nationalityDetect recognizes sud[\s-]+america(na)?
 - does nationalityDetect recognizes Orientale in the name?
 - someway avoid ("Unknown") errors to be notify-ed to user multiple times (WE GIVE UP, IT'S NOT DESIRABLE...)
 - person-patterns-to-remove-before-sum (@HOME)
 - normalizeNationality(): remove <i class='icon-info'></i>, and handle it in view...
 - TEST if *body* page sum does not change if page is not updated (@HOME) (DONE, TO BE TESTED)
 - TEST PersonsController::getUrlContents() (@HOME)
 - TEST if null phones set to db (PersonsController::sync() - $personDetail["phone"] = $phone; ) cause some harm...
 - TEST new showcase selection strategy (the number 1...) (@HOME)
 - remove openedId, ... and implement opening details page in a new tab... (DONE, TO BE TESTED @HOME)
 - CHECK active flag for NOT active persons is set to '0' (not null...) (SHOULD BE OK...)
 - person_detail.showcase ???
 - photo.timestamp_last_modification ??? (UNUSELESS, COMMENTED OUT)
 - why nationality in some persons is null, and some is 'world'? (<i class='icon-info'></i>) (IT'S ETNICITY, IGNORED)
 - how do we set showcase flag? (should be: photo.number === 1 ...)
 - name truncation: much longer... (and put full name in title of name, not in title of showcase photo...) (DONE)
 - adjust person source link href (now is about:blank ...) (DONE, TO BE TESTED)
 - toe: description: "<br /><br />" => should be removed in normalization... (DONE, TO BE TESTED)
 - "Irene Italiana": person view: all photos are portait, there is no margin below... (TO BE DEBUGGED @HOME)
 - Kelly (id: 180) person view has "previous" button, but "+" does not open... (because it is not active... OK? No, make a js function which check activity of uniq_next's... ) (DONE: CHECK isUniqPrimary()...)
 - when sorting, consider null votes as a median value (4.5?) (DONE, TO BE CHECKED)
 - Mila Se... e Mila Sc... mix when uniq-next is opened... :-(
 - id: 317, person view photos in two groups, the first upper, the second lower... ??? :-( ("thruthful" flag empty, and not "unknown")
 - remove file logging for curl (and remove curl.log)...
 - login: wrong password => hide loading gif...
 - toe: load all images ("?p=1, ?p=2, ...)
 - review photoGetByShowcase()... (reload from DB ???, no, showcase = 1 if (number ===1 )...)
 - when filtering for vote (4 / 5 / ...), apply rule: null === ((9-0)/2) = 4.5 ...
 - first click on photos: no prev/next (BOOH, DOESN'T HAPPEN ANYMORE...)
 - how to show a person if it's top-uniq is not active??? (POP-UP ACTIVE FIRST PERSON IN UNIQ CHAIN, IN PERSON JS CONTROLLER)
 - handle person's race ('oriente' / 'sudamerica') ... (?) (currently we ignore it... we could extend countries service to handle "custom countries" (or ethnicity) ... (like "europe-east", "america-south", "east", ...)
 - if photos are a little zoomed, no match is found: find a solution to however find a match, or allow user to add uniqueness flag... IDEA: if the phone matches, use a lower similarity factor... (DONE, TO BE TESTED @HOME)
 - sometimes unique persons in persons view are not one next to the other...
 - when syncing comments, start with the first message of first page in thread... (in getCommentsByField(), added "ORDER BY {$tableMaster}.id ASC", TOBETESTED @HOME)
 - restore php mem_limit to 128MB...
 - avoid duplicated comments SET problems... (DONE, SKIPPING OLD COMMENTS, TO BE TESTED @HOME)
