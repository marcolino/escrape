<div class="container">
  <div class="tabbable tabs-below">
    <ul class="nav nav-pills">
      <li ng-class="{active: selectedTab === 'main'}">
        <a href="" ng-click="selectedTab = 'main';">Main</a>
      </li>
      <li ng-class="{active: selectedTab === 'photos'}">
        <a href="" ng-click="selectedTab = 'photos';">Photos</a>
      </li>
      <li ng-class="{active: selectedTab === 'photosOccurrences', hide: selectedTab !== 'photosOccurrences'}">
        <a href="" ng-click="selectedTab = 'photosOccurrences';">Photos Occurrences</a>
      </li>
      <li ng-class="{active: selectedTab === 'comments'}">
        <a href="" ng-click="selectedTab = 'comments';">Comments <span class="badge">{{person.comments.length}}</span></a>
      </li>
      <li ng-class="{active: selectedTab === 'unions', hide: true}">
        <a href="" ng-click="selectedTab = 'unions';">Unions</a>
      </li>
    </ul>
  
    <!-- person.id: {{person.id}} -->
    <!-- main pill -->
    <div class="tab-content" ng-show="selectedTab == 'main'">
      <form class="form-horizontal" style="margin-top:5px">
        <div class="form-group">
          <div class="col-xs-12">
            <div class="slider-horizontal">
            <span ng-repeat="(id, photo) in person.photos">
              <!--<pre>id:{{id}}, photo:{{photo}}</pre>-->
              <span ng-if="!cfg.fake">
                <img ng-src="{{cfg.apiUri + '/' + photo.path_small}}" class="img-rounded img-clip" />
              </span>
              <span ng-if="cfg.fake">
                <img ng-src="images/users/user-{{$index}}.jpg" class="img-rounded img-clip" />
              </span>
            </span>
            </div>
          </div>
        </div>
        <div class="form-group">
          <div class="col-xs-6">
            <div class="input-group">
              <span class="input-group-addon" title="Name"><span class="glyphicon glyphicon-user"></span></span>
              <input type="text" class="form-control" ng-model="person.name" placeholder="Name">
            </div>
          </div>
          <div class="col-xs-6">
            <div class="input-group">
              <span class="input-group-addon" title="Real name"><span class="glyphicon glyphicon-heart"></span></span>
              <input type="text" class="form-control" ng-model="person.realname" placeholder="Real name">
            </div>
          </div>
        </div>
        <div class="form-group">
          <div class="col-xs-6">
            <div class="input-group">
              <span class="input-group-addon" title="Description"><span class="glyphicon glyphicon-pencil"></span></span>
              <textarea class="form-control" rows="3" ng-model="person.description" placeholder="Description"></textarea>
            </div>
          </div>
          <div class="col-xs-6">
            <div class="input-group">
              <span class="input-group-addon" title="Notes"><span class="glyphicon glyphicon-edit"></span></span>
              <textarea class="form-control" rows="3" ng-model="person.notes" placeholder="Notes"></textarea>
            </div>
          </div>
        </div>
        <div class="form-group">
          <div class="col-xs-7 col-sm-6 col-md-6 col-lg-6">
            <div class="dropdown">
              <div class="input-group" data-toggle="dropdown">
                <span class="input-group-addon" title="Nationality"><i ng-class="getCountryClass(person.nationality.countryCode)"></i></span>
                <input class="form-control" id="query" name="query" type="text" ng-value="person.nationality.countryName" />
              </div>
              <ul class="dropdown-menu scrollable-menu" role="menu">
                <li ng-repeat="(countryCode, countryName) in countries" class="flag-li">
                  <a ng-click="formChangeCountry('{{countryCode}}')"><i ng-class="getCountryClass(countryCode)"></i> {{countryName}}</a>
                </li>
              </ul>
            </div>
          </div>
          <div class="col-xs-5 col-sm-6 col-md-6 col-lg-6">
            <div class="input-group">
              <span class="input-group-addon" title="Referrals sites"><span class="glyphicon glyphicon-cloud-download"></span></span>
              <div class="form-control">
                <div class="slider-horizontal">
                  <span ng-repeat="(id, value) in sites">
                    <span ng-if="!cfg.fake">
                      <img class="image-referral-site" ng-src="images/referral-sites/{{id}}.png" ng-attr-title="{{value.name}}">
                    </span>
                    <span ng-if="cfg.fake">
                      <img class="image-referral-site" ng-src="images/referral-sites/fake-{{id}}.png" ng-attr-title="{{value.name}}">
                    </span>
                  </span>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="form-group">
          <div class="col-xs-5 col-sm-3 col-md-2 col-lg-2">
            <div class="input-group">
              <span class="input-group-addon" title="Vote up" ng-click="vote(+1)"><a href=""><span class="glyphicon glyphicon-thumbs-up"></span></a></span>
              <input type="text" style="min-width: 2.4em" class="form-control" ng-model="person.vote" placeholder="Vote">
              <span class="input-group-addon" title="Vote down" ng-click="vote(-1)"><a href=""><span class="glyphicon glyphicon-thumbs-down"></span></a></span>
            </div>
          </div>
          <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
            <div class="input-group">
              <span class="input-group-addon" title="Phone"><a ng-href="tel:{{person.phone}}"><span class="glyphicon glyphicon-earphone"></span></a></span>
              <input type="text" class="form-control" ng-model="person.phone" placeholder="Phone">
            </div>
          </div>
          <div class="col-xs-3 col-sm-5 col-md-6 col-lg-6">
            <div class="input-group">
              <span class="input-group-addon" title="Last time sync'ed"><span class="glyphicon glyphicon-calendar"></span></a></span>
              <input type="text" class="form-control" ng-value="person.timestamp * 1000 | date:'yyyy-MM-dd HH:mm:ss'" readonly placeholder="Last time sync'ed">
            </div>
          </div>
        </div>
        <div class="form-group">
          <div class="col-xs-12">
            <div class="input-group">
              <span class="input-group-addon" title="Street address photo"><a data-toggle="modal" data-target="#streetAddressModalPopup"><span class="glyphicon glyphicon-home"></span></a></span>
              <input type="text" class="form-control" ng-model="person.streetAddress" placeholder="Street address">
              <span class="input-group-addon" title="Street address indications"><a data-toggle="modal" data-target="#streetAddressIndicationsModalPopup"><span class="glyphicon glyphicon-road"></span></a></span>
            </div>
          </div>
        </div>
 
        <div class="form-group" style="vertical-align:bottom">
          <div class="col-xs-12">
            <button type="submit" class="btn btn-primary">Save</button>
          </div>
        </div>
      </form>

      <!-- street address modal popup -->
      <div id="streetAddressModalPopup" class="modal fade" tabindex="-1" role="dialog">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
              <h4 class="modal-title">{{person.streetAddress}}</h4>
            </div>
            <div class="modal-body">
              <img ng-src="{{person.streetAddressImageUrl}}" class="img-responsive">
            </div>
          </div>
        </div>
      </div>

      <!-- street address indications modal popup -->
      <div class="modal fade" id="streetAddressIndicationsModalPopup">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
              <h4 class="modal-title">{{person.streetAddress}}</h4>
            </div>
            <div class="modal-body">
              <map style="display: block; height: 32em; width: 100%;" zoom="14" Xcenter="[40.74, -74.18]" scrollwheel="false" zoom-control-options="{ style: 'small' }" map-type-id="ROADMAP">
                <marker position="{{person.streetLocation}}" title="{{person.streetAddress}}" draggable="false" visible="true"></marker>
              </map>
            </div>
          </div>
        </div>
      </div>

    </div>

    <!-- photos pill -->
<!--<pre> person: {{person}} </pre>-->
    <div class="tab-content" ng-show="selectedTab == 'photos'">
      <div class="slides-control">
        <carousel disable-animation="true">
          <slide ng-repeat="photo in person.photos" NOactive="photo.active">
            <img class="slide" ng-src="{{cfg.apiUri + '/' + photo.path_full}}" />
            <div class="carousel-caption">
              <p>{{slide.text}}</p>
            </div>
            <!-- ------------------------------------ -->
            <div class="carousel-toolbar">
              <div class="form-group" style="vertical-align:bottom">
                <div class="col-xs-12">
              <!--<button ng-click="photoGetOccurrences('http://www.investireoggi.it/attualita/files/2015/01/marcotravaglio.jpg')" class="btn btn-success"><i class="glyphicon glyphicon-ok"></i> Check</button>-->
                  <button ng-click="photoGetOccurrences('http://www.investireoggi.it/attualita/files/2015/01/marcotravaglio.jpg')" class="btn btn-success"><i class="glyphicon glyphicon-ok"></i> Check</button>
              <!--<button ng-click="photoGetOccurrences('{{photo.url}}')" class="btn btn-success"><i class="glyphicon glyphicon-ok"></i> Check</button>-->
                </div>
              </div>
            </div>
            <!-- ------------------------------------ -->
          </slide>
        </carousel>
      </div>

      <!-- photo show occurrences modal popup -->
      <div id="photoShowOccurrencesModalPopup" class="modal fade" tabindex="-1" role="dialog">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
              <h4 class="modal-title">Check photo occurrences</h4>
            </div>
            <div class="modal-body">
              dfkghdfkjgdfsjkgjksdfhgkj
              <img ng-src="" class="img-responsive">
            </div>
          </div>
        </div>
=======
    </div>

    <!-- photosOccurrences pill -->
    <div class="tab-content" ng-show="selectedTab == 'photosOccurrences'">
      {{photoOccurrencesResponse}}
    
      <hr>
      <div>
        <button ng-click="unique()" class="btn btn-success"><i class="glyphicon glyphicon-ok"></i> Unique</button>
        <button ng-click="fake()" class="btn btn-danger"><i class="glyphicon glyphicon-ban-circle"></i> Fake</button>
>>>>>>> 371a3f7325540e98e96e1390ea18155a731b329a
      </div>

      <!-- -------------------------------------------------------------------- -->
      <!--
      <button class="btn btn-default" ng-click="open()">Open me!</button>
      <button class="btn btn-default" ng-click="open('lg')">Large modal</button>
      <button class="btn btn-default" ng-click="open('sm')">Small modal</button>
      <div ng-show="selected">Selection from a modal: {{ selected }}</div>
      -->
      <!-- -------------------------------------------------------------------- -->

    </div>

    <!-- comments pill -->
    <div class="tab-content" ng-show="selectedTab == 'comments'">
      <div class="comments">
        <div ng-repeat="(id, comment) in person.comments | orderBy: ['topic', 'date']" class="row row-gap">
          <div class="form-group">
            <div class="col-xs-12">
              <div class="input-group">
                <div class="input-group-addon" style="vertical-align: top; width-max: 55px;" title="Comment">
                  <div style="font-size: 12px; text-align: left; margin-bottom: 3px; width-max: 55px;"><i>N&deg;:</i> {{1+$index}}</div>
                  <div style="font-size: 12px; text-align: left; margin-bottom: 3px; width-max: 55px;"><i>Topic:</i> {{comment.topic}}</div>
                  <div style="font-size: 12px; text-align: left; margin-bottom: 3px; width-max: 55px;"><i>Date:</i> {{comment.date}}</div>
                  <div style="font-size: 12px; text-align: left; margin-bottom: 3px; width-max: 55px;"><i>Author:</i> {{comment.author}}</div>
                  <div style="font-size: 12px; text-align: left; margin-bottom: 3px; width-max: 55px;"><i>&nbsp; karma:</i> {{comment.author_karma}}</div>
                  <div style="font-size: 12px; text-align: left; margin-bottom: 3px; width-max: 55px;"><i>&nbsp; posts:</i> {{comment.author_posts}}</div>
                </div>
                <div class="form-control" style="min-height: 128px; overflow-y:auto;" ng-bind-html="comment.content"></div>
                <!--<textarea class="form-control" rows="3">{{comment.content}}</textarea>-->
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- unions pill -->
    <div class="tab-content" ng-show="selectedTab == 'unions'">
      unions...
    </div>
  
  </div>
</div>

<script type="text/ng-template" id="myModalContent.html">
  <div class="modal-header">
    <h3 class="modal-title">I am a modal!</h3>
  </div>
  <div class="modal-body">
    <ul>
      <li ng-repeat="item in items">
        <a ng-click="selected.item = item">{{ item }}</a>
      </li>
    </ul>
    Selected: <b>{{ selected.item }}</b>
  </div>
  <div class="modal-footer">
    <button class="btn btn-primary" ng-click="ok()">OK</button>
    <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
  </div>
</script>
