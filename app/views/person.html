<p>You're logged in as user {{ username }} ~ <a href="#/login">Logout</a></p>

<div class="container">
  <div class="tabbable tabs-below">
    <ul class="nav nav-pills">
      <li ng-class="{active: selectedTab == 'main'}">
        <a href="" ng-click="selectedTab = 'main';">Main</a>
      </li>
      <li ng-class="{active: selectedTab == 'photos'}">
        <a href="" ng-click="selectedTab = 'photos';">Photos</a>
      </li>
      <li ng-class="{active: selectedTab == 'comments'}">
        <a href="" ng-click="selectedTab = 'comments';">Comments <span class="badge">{{ person.comments.length }}</span></a>
      </li>
      <li ng-class="{active: selectedTab == 'unions', hide: true}">
        <a href="" ng-click="selectedTab = 'unions';">Unions</a>
      </li>
    </ul>
  
    <!-- person.id: {{person.id}} -->
    <!-- main pill -->
    <div class="tab-content" ng-show="selectedTab == 'main'">
      <form class="form-horizontal" style="margin-top:5px">
        <div class="form-group" style="vertical-align:top">
          <div class="col-xs-12">
            <div class="slider-horizontal">
            <span ng-repeat="(id, photo) in person.photos">
              <span>
                <img ng-src="images/users/user-{{$index}}.jpg" class="img-rounded img-clip" />
                <!--<img ng-src="{{sites[person.site]['url']}}/{{photo}}" class="img-rounded img-clip" />-->
                &nbsp;
              </span>
            </span>
            </div>
          </div>
        </div>
        <div class="form-group">
          <div class="col-xs-6">
            <div class="input-group">
              <span class="input-group-addon" title="Name"><span class="glyphicon glyphicon-user"></span></span>
              <input type="text" class="form-control" ng-model="person.name" placeholder="Name">
            </div>
          </div>
          <div class="col-xs-6">
            <div class="input-group">
              <span class="input-group-addon" title="Real name"><span class="glyphicon glyphicon-heart"></span></span>
              <input type="text" class="form-control" ng-model="person.realname" placeholder="Real name">
            </div>
          </div>
        </div>
        <div class="form-group">
          <div class="col-xs-12">
            <div class="input-group">
              <span class="input-group-addon" title="Description"><span class="glyphicon glyphicon-pencil"></span></span>
              <textarea class="form-control" rows="3" ng-model="person.description" placeholder="Description"></textarea>
            </div>
          </div>
        </div>
        <div class="form-group">
          <div class="col-xs-5 col-sm-3 col-md-2 col-lg-2">
            <div class="dropdown">
              <div class="input-group" data-toggle="dropdown">
                <span class="input-group-addon" title="Nationality"><img ng-src="images/flags/{{person.nationality.code}}.png" class="flag noselect" /></span>
                <input class="form-control" id="query" name="query" type="text" ng-model="person.nationality.country" />
              </div>
              <ul class="dropdown-menu scrollable-menu" role="menu">
                <li ng-repeat="(countryCode, countryName) in countries">
                  <a ng-click="formChangeCountry('{{countryCode}}')"><img ng-src="images/flags/{{countryCode}}.png" class="flag-li noselect" /> {{countryName}}</a>
                </li>
              </ul>
            </div>
          </div>
        </div>
        <div class="form-group">
          <div class="col-xs-5 col-sm-3 col-md-2 col-lg-2">
            <div class="input-group">
              <span class="input-group-addon" title="Vote up" ng-click="vote(+1)"><a href=""><span class="glyphicon glyphicon-thumbs-up"></span></a></span>
              <input type="text" class="form-control" ng-model="person.vote" min="0" max="9" placeholder="Vote">
              <span class="input-group-addon" title="Vote down" ng-click="vote(-1)"><a href=""><span class="glyphicon glyphicon-thumbs-down"></span></a></span>
            </div>
          </div>
          <div class="col-xs-7 col-sm-9 col-md-10 col-lg-10">
            <div class="input-group">
              <span class="input-group-addon"><a ng-href="tel:{{person.phone}}"><span class="glyphicon glyphicon-earphone"></span></a></span>
              <input type="text" class="form-control" ng-model="person.phone" placeholder="Phone">
            </div>
          </div>
        </div>
        <div class="form-group">
          <div class="col-xs-12">
            <div class="input-group">
              <span class="input-group-addon" title="Street address photo"><a data-toggle="modal" data-target="#streetAddressModalPopup"><span class="glyphicon glyphicon-home"></span></a></span>
              <input type="text" class="form-control" ng-model="person.streetAddress" placeholder="Street address">
              <span class="input-group-addon" title="Street address indications"><a data-toggle="modal" data-target="#streetAddressIndicationsModalPopup"><span class="glyphicon glyphicon-road"></span></a></span>
            </div>
          </div>
        </div>
 
        <div class="form-group" style="vertical-align:bottom">
          <div class="col-xs-12">
            <button type="submit" class="btn btn-primary">Save</button>
          </div>
        </div>
      </form>

      <!-- street address modal popup -->
      <div id="streetAddressModalPopup" class="modal fade" tabindex="-1" role="dialog">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
              <h4 class="modal-title">{{ person.streetAddress }}</h4>
            </div>
            <div class="modal-body">
              <img ng-src="{{ person.streetAddressImageUrl }}" class="img-responsive">
            </div>
          </div>
        </div>
      </div>

      <!-- street address indications modal popup -->
      <div class="modal fade" id="streetAddressIndicationsModalPopup">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
              <h4 class="modal-title">{{ person.streetAddress }}</h4>
            </div>
            <div class="modal-body">
              <map style="display: block; height: 32em; width: 100%;" zoom="14" Xcenter="[40.74, -74.18]" scrollwheel="false" zoom-control-options="{ style: 'small' }" map-type-id="ROADMAP">
                <marker position="{{ person.streetLocation }}" title="{{ person.streetAddress }}" draggable="false" visible="true"></marker>
              </map>
            </div>
          </div>
        </div>
      </div>

    </div>

    <!-- photos pill -->
    <div class="tab-content" ng-show="selectedTab == 'photos'">
      <!-- carousel -->
      <div class="slides-control">
        <carousel>
          <slide ng-repeat="slide in person.slides" active="slide.active">
            <img class="slide" ng-src="{{ slide.image }}">
        <!--<img class="slide" ng-src="{{ sites[person.site]['url']} }/{{ photo }}" />-->
            <!--
            <div class="carousel-caption">
              <h4>Slide {{$index+1}}</h4>
            </div>
          -->
          </slide>
        </carousel>
      </div>
      <!-- /carousel -->
    </div>
  </div>

  <!-- comments pill -->
  <div class="tab-content" ng-show="selectedTab == 'comments'">
    <div class="comments">
      <div ng-repeat="(id, comment) in person.comments" class="row row-gap">
        <div class="form-group">
          <div class="col-xs-12">
            <div class="input-group">
              <span class="input-group-addon" style="vertical-align: top;" title="Comment">
                <div style="font-size:12px; text-align: left; margin-bottom:3px;"><i>Date:</i> {{ comment.date.substr(0, 10) }}</div>
                <div style="font-size:12px; text-align: left; margin-bottom:3px;"><i>By:</i> {{ comment.author }}</div>
              </span>
              <textarea class="form-control" rows="3">{{ comment.content }}</textarea>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
      
  <!-- unions pill -->
  <div class="tab-content" ng-show="selectedTab == 'unions'">
    unions...
  </div>

</div>