<!--
<div class="container">
  <div class="container-fluid">
    <div class="row-fluid">
      <div class="col-xs-2">
        <div class="short-div" style="background-color:#999">+</div>
        <div class="short-div" style="background-color:#aaa">x</div>
      </div>
      <div class="col-xs-10" style="background-color:#ccc">PHOTO</div>
    </div>
  </div>
</div>
-->
<div class="container-compact">

  <!-- persons-fixed-header -->
  <div id="persons-fixed-header" class="row persons-header right-scrollbar-placeholder">
  <div class="row" id="0">
    <div class="col-xs-4 col-sm-3 col-md-3 col-lg-2" style="min-width: 164px; padding-bottom:2px;">
      <div class="showcase-left"></div>
      <div class="showcase-right"></div>
    </div>

    <div class="col-xs-8 col-sm-9 col-md-9 col-lg-10">

      <div class="row" style="padding-bottom:2px;">
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
          <div class="btn btn-default btn-shorter" ng-attr-title="Order by the name of the person:{{::tooltipLegenda}}">
            <span class="persons-header-label">
              <span ng-if="!hasSortCriteria('name')">
                <span ng-click="addSortCriteria('name')">
                  name
                </span>
              </span>
              <span ng-if="hasSortCriteria('name')">
                <span ng-click="delSortCriteria('name')">
                  name
                </span>
                &nbsp;
                <span ng-click="flipSortCriteriaDirection('name')">
                  <i class="glyphicon" ng-class="{ 'glyphicon-circle-arrow-up': getSortCriteriaDirection('name') === 'descending', 'glyphicon-circle-arrow-down': getSortCriteriaDirection('name') === 'ascending' }">
                  </i>
                </span>
              </span>
            </span>
          </div>
        </div>
      </div>

      <div class="row" style="padding-bottom:2px;">
        <div class="col-xs-4 col-sm-2 col-md-2 col-lg-2">
          <div class="btn btn-default btn-shorter" ng-attr-title="Order by the nationality of the person:{{::tooltipLegenda}}">
            <span class="persons-header-label">
              <span ng-if="!hasSortCriteria('nationality')">
                <span ng-click="addSortCriteria('nationality')">
                  nationality
                </span>
              </span>
              <span ng-if="hasSortCriteria('nationality')">
                <span ng-click="delSortCriteria('nationality')">
                  nationality
                </span>
                &nbsp;
                <span ng-click="flipSortCriteriaDirection('nationality')">
                  <i class="glyphicon" ng-class="{ 'glyphicon-circle-arrow-up': getSortCriteriaDirection('nationality') === 'descending', 'glyphicon-circle-arrow-down': getSortCriteriaDirection('nationality') === 'ascending' }">
                  </i>
                </span>
              </span>
            </span>
          </div>
        </div>

        <div class="col-xs-4 col-sm-2 col-md-2 col-lg-2">
          <div class="btn btn-default btn-shorter" ng-attr-title="Order by the source site for this person:{{::tooltipLegenda}}">
            <span class="persons-header-label">
              <span ng-if="!hasSortCriteria('source')">
                <span ng-click="addSortCriteria('source')">
                  source
                </span>
              </span>
              <span ng-if="hasSortCriteria('source')">
                <span ng-click="delSortCriteria('source')">
                  source
                </span>
                &nbsp;
                <span ng-click="flipSortCriteriaDirection('source')">
                  <i class="glyphicon" ng-class="{ 'glyphicon-circle-arrow-up': getSortCriteriaDirection('source') === 'descending', 'glyphicon-circle-arrow-down': getSortCriteriaDirection('source') === 'ascending' }">
                  </i>
                </span>
              </span>
            </span>
          </div>
        </div>
        <div class="col-xs-4 col-sm-2 col-md-2 col-lg-2">
          <div class="btn btn-default btn-shorter" ng-attr-title="Order by the phone number of this person:{{::tooltipLegenda}}">
            <span class="persons-header-label">
              <span ng-if="!hasSortCriteria('phone')">
                <span ng-click="addSortCriteria('phone')">
                  phone
                </span>
              </span>
              <span ng-if="hasSortCriteria('phone')">
                <span ng-click="delSortCriteria('phone')">
                  phone
                </span>
                &nbsp;
                <span ng-click="flipSortCriteriaDirection('phone')">
                  <i class="glyphicon" ng-class="{ 'glyphicon-circle-arrow-up': getSortCriteriaDirection('phone') === 'descending', 'glyphicon-circle-arrow-down': getSortCriteriaDirection('phone') === 'ascending' }">
                  </i>
                </span>
              </span>
            </span>
          </div>
        </div>
  
        <div class="clearfix clearfix-thick visible-xs">&nbsp;</div>
  
        <div class="col-xs-4 col-sm-2 col-md-2 col-lg-2">
          <div class="btn btn-default btn-shorter" ng-attr-title="Order by the number of possible comments found for this person:{{::tooltipLegenda}}">
            <span class="persons-header-label">
              <span ng-if="!hasSortCriteria('comments')">
                <span ng-click="addSortCriteria('comments')">
                  comments
                </span>
              </span>
              <span ng-if="hasSortCriteria('comments')">
                <span ng-click="delSortCriteria('comments')">
                  comments
                </span>
                &nbsp;
                <span ng-click="flipSortCriteriaDirection('comments')">
                  <i class="glyphicon" ng-class="{ 'glyphicon-circle-arrow-up': getSortCriteriaDirection('comments') === 'descending', 'glyphicon-circle-arrow-down': getSortCriteriaDirection('comments') === 'ascending' }">
                  </i>
                </span>
              </span>
            </span>
          </div>
        </div>
        <div class="col-xs-4 col-sm-2 col-md-2 col-lg-2">
          <div class="btn btn-default btn-shorter" ng-attr-title="Order by the median rating of comments for this person:{{::tooltipLegenda}}">
            <span class="persons-header-label">
              <span ng-if="!hasSortCriteria('rating')">
                <span ng-click="addSortCriteria('rating')">
                  rating
                </span>
              </span>
              <span ng-if="hasSortCriteria('rating')">
                <span ng-click="delSortCriteria('rating')">
                  rating
                </span>
                &nbsp;
                <span ng-click="flipSortCriteriaDirection('rating')">
                  <i class="glyphicon" ng-class="{ 'glyphicon-circle-arrow-up': getSortCriteriaDirection('rating') === 'descending', 'glyphicon-circle-arrow-down': getSortCriteriaDirection('rating') === 'ascending' }">
                  </i>
                </span>
              </span>
            </span>
          </div>
        </div>
        <div class="col-xs-4 col-sm-2 col-md-2 col-lg-2">
          <div class="btn btn-default btn-shorter" ng-attr-title="Order by the vote of this person, given by current user:{{::tooltipLegenda}}">
            <span class="persons-header-label">
              <span ng-if="!hasSortCriteria('vote')">
                <span ng-click="addSortCriteria('vote')">
                  vote
                </span>
              </span>
              <span ng-if="hasSortCriteria('vote')">
                <span ng-click="delSortCriteria('vote')">
                  vote
                </span>
                &nbsp;
                <span ng-click="flipSortCriteriaDirection('vote')">
                  <i class="glyphicon" ng-class="{ 'glyphicon-circle-arrow-up': getSortCriteriaDirection('vote') === 'descending', 'glyphicon-circle-arrow-down': getSortCriteriaDirection('vote') === 'ascending' }">
                  </i>
                </span>
              </span>
            </span>
          </div>
        </div>
      </div>

      <div class="row" style="padding-bottom:2px;">
        <div class="col-xs-4 col-sm-2 col-md-2 col-lg-2">
          <div class="btn btn-default btn-shorter" ng-attr-title="Order by the 'new' flag for this person:{{::tooltipLegenda}}">
            <span class="persons-header-label">
              <span ng-if="!hasSortCriteria('new')">
                <span ng-click="addSortCriteria('new')">
                  new
                </span>
              </span>
              <span ng-if="hasSortCriteria('new')">
                <span ng-click="delSortCriteria('new')">
                  new
                </span>
                &nbsp;
                <span ng-click="flipSortCriteriaDirection('new')">
                  <i class="glyphicon" ng-class="{ 'glyphicon-circle-arrow-up': getSortCriteriaDirection('new') === 'descending', 'glyphicon-circle-arrow-down': getSortCriteriaDirection('new') === 'ascending' }">
                  </i>
                </span>
              </span>
            </span>
          </div>
        </div>
      </div>

    </div>
  </div>
  <!-- /persons-fixed-header -->

  <div class="row" ng-if="personsEmpty">
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 persons-warning-text">
      <span>Sorry, no person matching these criteria</span>
    </div>
  </div>

  <div class="jumbotron" ng-show="personsLoading">
    <div class="text-center">
      <span><img src="images/loading.gif" /> &emsp; Loading persons...</span>
    </div>
  </div>

  <div class="row row-gap" ng-repeat="person in personsList"
    NOng-attr-id="{{::person.id_person}}" ng-show="isUniqShown('{{::person.id_person}}')"
    ng-class="{
      'person-inactive': person.active !== '1',
      'person-uniq-id-last': isUniqLast('{{::person.id_person}}')
    }">
    <!-- TODO: test changing "person.active !== '1'" to "!person.active" ... -->

    <div class="col-xs-4 col-sm-3 col-md-3 col-lg-2" style="min-width: 164px; padding-bottom: 2px;">
      <div class="showcase-left" ng-attr-title="{{::isUniq(person.id_person) ? 'this person has some duplicate from different sources' : ''}}">
        <a href="" ng-click="uniqShow('{{::person.id_person}}')" class="no-text-decoration">
          <i class="fa fa-fw"
            ng-class="{
            'fa-plus-square': isUniqPrimary('{{person.id_person}}'),
            'fa-minus-square': isUniqPrimaryShown('{{person.id_person}}')
           }"></i>
        </a>
      </div>
      <div class="showcase">
        <div class="img-rounded img-clip-container">
          <a href="" ng-click="openDetailsInNewWindow(person.id_person)" class="no-text-decoration">
            <img ng-src="{{::cfg.apiUri + '/' + person.photo_path_small_showcase}}" class="img-clip"
              ng-class="{
                'img-thruthful-yes': person.thruthful === 'yes',
                'img-thruthful-no': person.thruthful === 'no',
                'img-thruthful-unknown': person.thruthful === 'unknown',
              }"
            />
          </a>
        </div>
      </div>
    </div>

    <div class="col-xs-8 col-sm-9 col-md-9 col-lg-10">

      <div class="row" style="/*background-color: #ffd;*/ margin-bottom:2px;">
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
          <div class="person-name" ng-click="openDetailsInNewWindow(person.id_person)" ng-attr-title="{{::person.name}}">
            <!-- SUPERSCRIPT BADGE NEW: <span ng-show="isNew(person)" class="label label-as-badge label-as-badge-small label-danger">NEW</span>-->
            <span style="text-align: left;">{{::shorten(person.name)}}</span>
          </div>
        </div>
      </div>

      <div class="row" style="padding-bottom:2px;">
        <div class="col-xs-4 col-sm-2 col-md-2 col-lg-2">
          <button type="button" class="btn btn-default btn-wider" ng-click="openDetailsInNewWindow(person.id_person)" ng-attr-title="nationality: {{::countries.getCountryName(person.nationality)}}">
            <span><i class="f16"><i ng-class="countries.getCountryClass(person.nationality)"></i></span>
          </button>
        </div>
        <div class="col-xs-4 col-sm-2 col-md-2 col-lg-2">
          <button type="button" class="btn btn-default btn-wider" ng-attr-title="referral source: {{::person.source_key}}" ng-click="openInNewWindow('{{:: person.url}}')">
            <span class="img-rounded"><img ng-src="images/referral-sources/{{::person.source_key}}.png" class="img-rounded img-source" /></span>
          </button>
        </div>
        <div class="col-xs-4 col-sm-2 col-md-2 col-lg-2">
          <button type="button" class="btn btn-default btn-wider" ng-attr-title="phone: {{::person.phone || 'none'}}" ng-disabled="{{::person.phone === '0'}}">
            <span><a ng-href="tel:{{::person.phone}}"><i class="glyphicon glyphicon-earphone"></i></a></span>
          </button>
        </div>

        <div class="clearfix clearfix-thick visible-xs">&nbsp;</div>

        <div class="col-xs-4 col-sm-2 col-md-2 col-lg-2">
          <div class="person-comments-count">
            <button type="button" class="btn btn-default btn-wider" ng-click="openDetailsInNewWindow(person.id_person, 'comments')" ng-attr-title="{{::person.comments_count}} comments">
              <span class="label label-as-badge label-info">{{::person.comments_count}}</span>
            </button>
          </div>
        </div>
        <div class="col-xs-4 col-sm-2 col-md-2 col-lg-2">
          <div class="person-rating">
            <button class="btn btn-default btn-wider" type="button" ng-click="openDetailsInNewWindow(person.id_person, 'comments')" ng-attr-title="rating: {{::person.rating || 'none'}}">
              <span class="label label-as-badge label-danger">{{::person.rating || '-'}}</span>
            </button>
          </div>
        </div>
        <div class="col-xs-4 col-sm-2 col-md-2 col-lg-2">
          <div class="person-vote">
            <button class="btn btn-default btn-wider" type="button" ng-click="openDetailsInNewWindow(person.id_person)" ng-attr-title="vote: {{::person.vote || 'none'}}">
              <span class="label label-as-badge label-success">{{::person.vote || '-'}}</span>
            </button>
          </div>
        </div>
      </div>

      <div class="row" style="padding-bottom:2px;">
        <div class="col-xs-4 col-sm-2 col-md-2 col-lg-2">
          <div class="person-is-new">
            <button class="btn btn-default btn-wider" type="button" ng-click="openDetailsInNewWindow(person.id_person)" ng-attr-title="{{::isNew(person) ? 'New' : 'Old '}} person record: was first seen {{::firstSeen(person)}}">
              <span><i class="glyphicon glyphicon-star" ng-class="{ 'person-new': isNew(person), 'person-not-new': !isNew(person) }"></i></span>
            </button>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>